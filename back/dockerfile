# ベースイメージを指定
FROM python:3.9

# 作業ディレクトリを設定
WORKDIR /app


#flask runを使用するにはENVに環境変数を指定する必要あり
ENV FLASK_APP=app.py
ENV FLASK_RUN_HOST=0.0.0.0

# 必要なファイルをコピー
COPY . /app

# Flaskをインストール
RUN pip install Flask

# 必要なライブラリをインストール ORMやDB接続のためのドライバー
RUN pip install SQLAlchemy
RUN pip install psycopg2
RUN pip install flask-restful
RUN pip install -r requirements.txt
RUN pip install --upgrade pip 

# 必要な依存関係をインストール JSONのシリアライザやバリデーションライブラリ、認証ライブラリ
RUN pip install Flask-JSON

# ファイル生成スクリプトを実行
RUN echo "from flask import Flask" > app.py \
    && echo "app = Flask(__name__)" >> app.py

# 必要な依存関係をインストール
# RUN pip install <必要なライブラリ>

# ポートを公開
EXPOSE 5000

# コンテナ内で実行するコマンドを指定
CMD ["python", "app.py"]
